<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tenant Message</title>
    <!-- Linking Google Font Link For Icons --> 
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="/css/tenant/tenantMessage.css"> 
</head>
<body>
    <div class="header">
        <div class="user-account">
            <div class="user-profile">
                <img src="/image/profile-img.png" alt="profile-img">
                <div class="user-detail">
            <h3><%= tenant2.FirstName || tenant2.firstName %> <%= tenant2.LastName || tenant2.lastName %></h3>
             <span>Tenant</span>
</div>

                   
                </div>
            </div>
        </div>
    </div>
    <aside class="sidebar">
        <div class="sidebar-header">
            <img src="/image/logo.png" alt="logo">
            <h3>BH Payment Monitoring </h3>
        </div>
        <ul class="sidebar-links">
            <!-- <h4>Main Menu</h4> -->
            <div class="menu-separator"></div>
           
             <li><a href="tenantPayment"><span class="material-symbols-outlined">payments</span>Payment</a></li>
            <li><a href="tenantMessage"><span class="material-symbols-outlined">chat</span>Messages</a></li>
            <li><a href="loginTenant"><span class="material-symbols-outlined">Logout</span>Logout</a></li>
        </ul>
        
    </aside>

    <main class="main-content p-4 w-100">
        <div class="sticky-header">
            <h4>Messages</h4>
        </div>

    

      <div class="tenant-chat-container">
    <div class="tenant-list">
        <h4>Landlord</h4>
        <ul id="tenantList">
            <li data-tenant="Juan Dela Cruz">Juan Dela Cruz</li>
          
        </ul>
    </div>

    <div class="chat-section">
        <div class="chat-header">
            <h4 id="chatWith">Tap Landlord name to start chat</h4>
        </div>

        <div class="chat-box" id="chatBox">
            <!-- Messages will appear here -->
        </div>

        <form id="chatForm">
            <input type="text" id="messageInput" placeholder="Type a message..." disabled />
            <button type="submit" class="btn-add" disabled>
                <span class="material-symbols-outlined">send</span>Send
            </button>
        </form>
    </div>
</div>

<script>
const tenantList = document.getElementById('tenantList');
const chatWith = document.getElementById('chatWith');
const chatBox = document.getElementById('chatBox');
const chatForm = document.getElementById('chatForm');
const messageInput = document.getElementById('messageInput');
const sendButton = chatForm.querySelector('button');

let currentTenant = null;

// Click on tenant to start chat
tenantList.addEventListener('click', function(e) {
    if(e.target.tagName === 'LI') {
        currentTenant = e.target.dataset.tenant;
        chatWith.textContent = `Chat with ${currentTenant}`;
        chatBox.innerHTML = ''; // Clear previous messages
        messageInput.disabled = false;
        sendButton.disabled = false;
    }
});

// Send message
chatForm.addEventListener('submit', function(e){
    e.preventDefault();
    const messageText = messageInput.value.trim();
    if(!messageText || !currentTenant) return;

    // Tenant message (from admin perspective)
    const adminMsg = document.createElement('div');
    adminMsg.classList.add('message', 'admin-message');
    adminMsg.textContent = messageText;
    chatBox.appendChild(adminMsg);
    chatBox.scrollTop = chatBox.scrollHeight;
    messageInput.value = '';

    // Simulate tenant reply
    setTimeout(() => {
        const tenantMsg = document.createElement('div');
        tenantMsg.classList.add('message', 'tenant-message');
        tenantMsg.textContent = `${currentTenant}: Thanks for the update!`;
        chatBox.appendChild(tenantMsg);
        chatBox.scrollTop = chatBox.scrollHeight;
    }, 1000);
});
</script>



</body>
</html>